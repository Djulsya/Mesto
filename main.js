(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(i)?i:String(i)),r)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formElement=n,this._enableValidationConfig=e,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._submitButtonSelector=e.submitButtonSelector,this._inputList=Array.from(this._formElement.querySelectorAll(this._enableValidationConfig.inputSelector)),this._submitSaveButton=this._formElement.querySelector(this._enableValidationConfig.submitButtonSelector)}var n,o;return n=t,(o=[{key:"_hasErrorInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleSaveButton",value:function(){!0===this._hasErrorInput()?(this._submitSaveButton.classList.add(this._enableValidationConfig.inactiveButtonClass),this._submitSaveButton.disabled=!0):(this._submitSaveButton.classList.remove(this._enableValidationConfig.inactiveButtonClass),this._submitSaveButton.disabled=!1)}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".popup__input-error_type_".concat(t.name));t.classList.add(this._enableValidationConfig.inputErrorClass),n.textContent=e}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".popup__input-error_type_".concat(t.name));t.classList.remove(this._enableValidationConfig.inputErrorClass),e.textContent=""}},{key:"_isValid",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_trackEventListener",value:function(){var t=this;this._toggleSaveButton(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e),t._toggleSaveButton()}))}))}},{key:"checkValidation",value:function(){var t=this;this._toggleSaveButton(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._trackEventListener()}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var i=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._link=e.link,this._name=e.name,this._templateElement=n,this._handleCardClick=o}var e,n;return e=t,(n=[{key:"_toggleLike",value:function(t){t.target.classList.toggle("element__button-like_active")}},{key:"_deleteElement",value:function(t){t.target.closest(".element").remove()}},{key:"_showCard",value:function(){return this._templateElement.cloneNode(!0)}},{key:"_trackEventListeners",value:function(){var t=this;this._elementPhoto.addEventListener("click",(function(){t._handleCardClick(t._link,t._name)})),this._createElement.querySelector(".element__button-delete").addEventListener("click",this._deleteElement.bind(this)),this._createElement.querySelector(".element__button-like").addEventListener("click",this._toggleLike)}},{key:"createNewCard",value:function(){return this._createElement=this._showCard(),this._createElement.querySelector(".element__text").textContent=this._name,this._elementPhoto=this._createElement.querySelector(".element__photo"),this._elementPhoto.alt=this._name,this._elementPhoto.src=this._link,this._trackEventListeners(),this._createElement}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===u(r)?r:String(r)),o)}var r}var l=function(){function t(e,n){var o=e.items,r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderItems=o,this._renderer=r,this._elementsAlbum=n}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._renderItems.reverse().forEach((function(e){t._renderer(e)}))}},{key:"addItems",value:function(t){this._elementsAlbum.prepend(t)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===c(r)?r:String(r)),o)}var r}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._closeButtonPopup=this._popup.querySelector(".popup__closebutton"),this._handlePressEsc=this._handlePressEsc.bind(this),this._handleClickOverlay=this._handleClickOverlay.bind(this)}var e,n;return e=t,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handlePressEsc),document.addEventListener("click",this._handleClickOverlay)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handlePressEsc),document.removeEventListener("click",this._handleClickOverlay)}},{key:"_handlePressEsc",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"_handleClickOverlay",value:function(t){t.target.classList.contains("popup")&&this.closePopup()}},{key:"trackEventListener",value:function(){var t=this;this._popup.addEventListener("click",this._handleClickOverlay),this._closeButtonPopup.addEventListener("click",(function(){return t.closePopup()}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===f(r)?r:String(r)),o)}var r}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},m.apply(this,arguments)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(u,t);var e,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(o);if(r){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._popup=t,n._editForm=e,n._formPopup=n._popup.querySelector(".popup__editprofile"),n._formInputs=Array.from(n._formPopup.querySelectorAll(".popup__input")),n}return e=u,(n=[{key:"closePopup",value:function(){m(h(u.prototype),"closePopup",this).call(this),this._formPopup.reset()}},{key:"_getInputValues",value:function(){var t=this;return this._inputInfo={},this._formInputs.forEach((function(e){return t._inputInfo[e.name]=e.value})),this._inputInfo}},{key:"trackEventListener",value:function(){var t=this;m(h(u.prototype),"trackEventListener",this).call(this),this._formPopup.addEventListener("submit",(function(e){e.preventDefault(),t._editForm(t._getInputValues()),t.closePopup()}))}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(s);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==_(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===_(r)?r:String(r)),o)}var r}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},S.apply(this,arguments)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(u,t);var e,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(o);if(r){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupOpenPhoto=t,e._albumPhoto=e._popupOpenPhoto.querySelector(".popup__photo-openphoto"),e._albumElementsInfo=e._popupOpenPhoto.querySelector(".popup__photo-info"),e}return e=u,(n=[{key:"openPopup",value:function(t,e){this._albumPhoto.src=t,this._albumPhoto.alt=e,this._albumElementsInfo.textContent=e,S(g(u.prototype),"openPopup",this).call(this)}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(s);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===E(r)?r:String(r)),o)}var r}var O=function(){function t(e){var n=e.name,o=e.about;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameProfile=n,this._aboutProfile=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._nameProfile.textContent,about:this._aboutProfile.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._nameProfile.textContent=e,this._aboutProfile.textContent=n}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),j=document.querySelector(".profile-popup"),x=document.querySelector(".profile__editbutton"),C=document.querySelector(".profile__name"),L=document.querySelector(".profile__about"),B=document.querySelector(".popup__container"),q=B.querySelector(".popup__input_type_name"),I=B.querySelector(".popup__input_type_about"),V=document.querySelector(".popup-addphoto"),M=document.querySelector(".profile__addbutton"),R=document.querySelector(".album__elements"),D=document.querySelector(".popup-openphoto"),H=document.querySelector("#template-element").content,T={formSelector:".popup__editprofile",inputSelector:".popup__input",submitButtonSelector:".popup__savebutton",inactiveButtonClass:"popup__savebutton_error",inputErrorClass:"popup__input-errorline"};function A(t,e){N.openPopup(t,e),N.trackEventListener()}function G(t){return new i(t,H,A).createNewCard()}new n(T,document.querySelector('[name="editprofile-addphoto"]')).enableValidation(),new n(T,document.querySelector('[name="editprofile"]')).enableValidation();var Y=new l({items:[{name:"NY, caladium",link:"https://images.unsplash.com/photo-1596670616944-60db8c2a24f5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=464&q=80"},{name:"Altai Republic, dahlia",link:"https://images.unsplash.com/photo-1631100615885-16e05606aa11?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=435&q=80"},{name:"UK, Nephrolepis and horse",link:"https://images.unsplash.com/photo-1627649121950-116ee520fc21?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},{name:"Sri-Lanka, alocasia",link:"https://images.unsplash.com/photo-1547070078-442aa97f595a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"},{name:"Vietnam, nymphaea",link:"https://images.unsplash.com/photo-1560741232-886afab774be?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=327&q=80"},{name:"Detroit, papaver",link:"https://images.unsplash.com/photo-1589720061712-10b534c7218e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=435&q=80"}],renderer:function(t){Y.addItems(G(t))}},R);Y.renderItems();var U=new v(j,(function(t){F.setUserInfo(t)}));U.trackEventListener(),x.addEventListener("click",(function(){U.openPopup(),q.value=F.getUserInfo().name,I.value=F.getUserInfo().about}));var W=new v(V,(function(t){W.addItems(G(t))}));W.trackEventListener(),M.addEventListener("click",(function(){W.openPopup()}));var N=new P(D),F=new O({name:C,about:L})})();